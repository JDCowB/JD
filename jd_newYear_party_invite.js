/*
活动名称：京东看春晚助力
https://pro.m.jd.com/mall/active/4TeSpXMCG6Kwy63rTeRDUp6wfL4n/index.html
环境变量：JD_PARTY_INVITE_CODE // 指定助力码

自行控制助力上限

cron:1 1 1 1 *

*/

const $ = new Env('京东看春晚助力')
const jdCookie = require('./jdCookie')
const notify = require('./function/sendJDNotify')
const common = require('./function/jdCommon')
const { H5st } = require('./function/jdCrypto')

var iｉl='jsjiami.com.v7';const iil1illl=lIi11i;(function(iilIilI1,IiIi11ii,iIIilii,i1IIii1i,l1lli1il,ilIliII,lII1i11){return iilIilI1=iilIilI1>>0x6,ilIliII='hs',lII1i11='hs',function(iil1Illi,liilli,iiIlI1I1,IIiiI11i,llIIilli){const li1li1=lIi11i;IIiiI11i='tfi',ilIliII=IIiiI11i+ilIliII,llIIilli='up',lII1i11+=llIIilli,ilIliII=iiIlI1I1(ilIliII),lII1i11=iiIlI1I1(lII1i11),iiIlI1I1=0x0;const i11ilIiI=iil1Illi();while(!![]&&--i1IIii1i+liilli){try{IIiiI11i=parseInt(li1li1(0x1e1,')mgL'))/0x1+parseInt(li1li1(0x1d8,'H#Un'))/0x2*(-parseInt(li1li1(0x25a,'WbmS'))/0x3)+-parseInt(li1li1(0x2ad,'WbmS'))/0x4+-parseInt(li1li1(0x195,'yYDg'))/0x5+-parseInt(li1li1(0x1dc,'n3gy'))/0x6+-parseInt(li1li1(0x26d,'Esoz'))/0x7*(-parseInt(li1li1(0x2c7,'50f&'))/0x8)+parseInt(li1li1(0x1a2,'ISwm'))/0x9*(parseInt(li1li1(0x234,'iN)l'))/0xa);}catch(i1Iiili){IIiiI11i=iiIlI1I1;}finally{llIIilli=i11ilIiI[ilIliII]();if(iilIilI1<=i1IIii1i)iiIlI1I1?l1lli1il?IIiiI11i=llIIilli:l1lli1il=llIIilli:iiIlI1I1=llIIilli;else{if(iiIlI1I1==l1lli1il['replace'](/[QTXUghSHRdCDWyrEBFA=]/g,'')){if(IIiiI11i===liilli){i11ilIiI['un'+ilIliII](llIIilli);break;}i11ilIiI[lII1i11](llIIilli);}}}}}(iIIilii,IiIi11ii,function(Ii1liiI1,Iiil1i11,llIiIlII,iIliiIIl,iIlIlil1,l1il1ll1,l11iIII){return Iiil1i11='\x73\x70\x6c\x69\x74',Ii1liiI1=arguments[0x0],Ii1liiI1=Ii1liiI1[Iiil1i11](''),llIiIlII=`\x72\x65\x76\x65\x72\x73\x65`,Ii1liiI1=Ii1liiI1[llIiIlII]('\x76'),iIliiIIl=`\x6a\x6f\x69\x6e`,(0x156b01,Ii1liiI1[iIliiIIl](''));});}(0x3080,0x5b275,iIli1liI,0xc4),iIli1liI)&&(iｉl=`\x5f6`);const isNotify=![];$[iil1illl(0x210,'Aa2s')]=process[iil1illl(0x1df,'^*^#')][iil1illl(0x192,'WbmS')]||'';let cookie='';const cookiesArr=Object[iil1illl(0x1af,'OxlJ')](jdCookie)[iil1illl(0x231,'l8Y$')](lii1Iii1=>jdCookie[lii1Iii1])[iil1illl(0x2b5,'&2pd')](I1IlI1I1=>I1IlI1I1);!cookiesArr[0x0]&&($[iil1illl(0x20a,'9ULu')]($[iil1illl(0x24e,'I6J&')],iil1illl(0x1c4,']C2p')),process[iil1illl(0x285,'yYDg')](0x1));!(async()=>{const li11li11=iil1illl,IiI1liii={'QluSJ':li11li11(0x1cc,'H#Un'),'HfEPr':function(iI111Ii,lliIIiil){return iI111Ii<lliIIiil;},'qfIoX':function(lI1ii1ii,Ii1iIiIl){return lI1ii1ii!==Ii1iIiIl;},'qxjRs':li11li11(0x1a4,'DYM%'),'cNZpe':li11li11(0x2ca,'PvId'),'IoYDy':function(i1lil1II,IiiIIll){return i1lil1II+IiiIIll;},'lJFtR':function(i1iIIl1,lli1IIiI){return i1iIIl1(lli1IIiI);},'GyjVr':li11li11(0x1c8,'kpvL'),'RvkYw':function(iIlIi1l1){return iIlIi1l1();},'ejisD':li11li11(0x219,'&2pd')};$[li11li11(0x1ce,'I6J&')]=0x0,$[li11li11(0x267,'CwUi')]=IiI1liii[li11li11(0x257,'50f&')],notify[li11li11(0x1d6,'VcY7')]({'title':$[li11li11(0x1d2,'r)ma')]});for(let liIiIili=0x0;IiI1liii[li11li11(0x1a7,'&2pd')](liIiIili,cookiesArr[li11li11(0x21a,'ISwm')]);liIiIili++){if(IiI1liii[li11li11(0x281,'4h3v')](IiI1liii[li11li11(0x23a,'Aa2s')],IiI1liii[li11li11(0x2cb,'n3gy')])){$[li11li11(0x292,'I6J&')]=IiI1liii[li11li11(0x276,'CwUi')](liIiIili,0x1),cookie=cookiesArr[liIiIili],common[li11li11(0x2b6,'9ULu')](cookie),$[li11li11(0x1c9,'n3gy')]=IiI1liii[li11li11(0x216,'yYDg')](decodeURIComponent,common[li11li11(0x202,'FabX')](cookie,IiI1liii[li11li11(0x28a,'i0wM')])),$['UA']=common[li11li11(0x28f,'FabX')]($[li11li11(0x26f,'Esoz')]),$[li11li11(0x266,'n3gy')]=notify[li11li11(0x191,'Esoz')]($[li11li11(0x25d,'WU*J')],$[li11li11(0x19c,']0zM')]),$[li11li11(0x282,'h&L8')]='',console[li11li11(0x21b,'8$Eq')](li11li11(0x201,'Aa2s')+$[li11li11(0x1ea,'n3gy')]+'】'+($[li11li11(0x2b8,'8eA*')]||$[li11li11(0x26f,'Esoz')])+li11li11(0x227,'8eA*')),await IiI1liii[li11li11(0x2ab,'WU*J')](Main),common[li11li11(0x2c0,'Bf[O')]();if($[li11li11(0x220,'WbmS')])break;await $[li11li11(0x1ff,'[nJh')](0x3e8);}else ilii1lI1[li11li11(0x2a8,'DYM%')]('❌\x20'+i1iIlll1[li11li11(0x2bc,'9ULu')]),i1Ilil1i[li11li11(0x232,'50f&')][li11li11(0x21c,'i0wM')](lIill11l[li11li11(0x2a9,'^*^#')]);}isNotify&&notify[li11li11(0x258,'pOEJ')]()&&(IiI1liii[li11li11(0x2c3,'pOEJ')](IiI1liii[li11li11(0x20b,'WbmS')],IiI1liii[li11li11(0x1e7,'PvId')])?i1ilIIi[li11li11(0x23b,']0zM')]('❓'+l11llil+'\x20'+i1llll[li11li11(0x1a0,'l8Y$')](IIIiilil)):(notify[li11li11(0x204,'7LVa')](IiI1liii[li11li11(0x1ad,'^*^#')](notify[li11li11(0x259,'8eA*')],'\x0a')),await notify[li11li11(0x18c,'miBq')]()));})()[iil1illl(0x1b2,'miBq')](iIl1I1il=>$[iil1illl(0x249,'h&L8')](iIl1I1il))[iil1illl(0x246,'h&L8')](()=>$[iil1illl(0x1dd,')mgL')]());async function Main(){const lliI11li=iil1illl,iiIi1ili={'NDgqH':function(I1lI11II,iIlIlIi){return I1lI11II===iIlIlIi;},'nPkHf':lliI11li(0x24a,'miBq'),'lOlNJ':function(lI1IIi11,lIi1ilIi){return lI1IIi11===lIi1ilIi;},'EvlVy':lliI11li(0x256,'9ULu'),'vbHvR':function(lilil1iI,iliIiI1){return lilil1iI(iliIiI1);},'XGmUs':lliI11li(0x252,'ISwm'),'BLnce':function(il1ii1II,IIi1IlI1){return il1ii1II(IIi1IlI1);}},IIlillii=await common[lliI11li(0x189,'9ULu')](cookie);if(!IIlillii&&iiIi1ili[lliI11li(0x2c4,'[nJh')](typeof IIlillii,iiIi1ili[lliI11li(0x1b8,'yYDg')])){console[lliI11li(0x218,'H#Un')](lliI11li(0x217,'i0wM'));return;}try{iiIi1ili[lliI11li(0x2bb,'x05%')]($[lliI11li(0x284,'ReHA')],0x1)?!$[lliI11li(0x274,'6UNf')]&&(iiIi1ili[lliI11li(0x27c,'4kTY')](iiIi1ili[lliI11li(0x1fa,'ISwm')],iiIi1ili[lliI11li(0x1c7,'@nfn')])?(await iiIi1ili[lliI11li(0x241,'iN)l')](sendRequest,iiIi1ili[lliI11li(0x203,'VcY7')]),await $[lliI11li(0x296,'9ULu')](0x7d0)):Iil1IIiI[lliI11li(0x278,'l8Y$')](lIl11I[lliI11li(0x29a,'yYDg')])):await iiIi1ili[lliI11li(0x291,'&2pd')](inviteFissionhelp,$[lliI11li(0x2b0,'ENgy')]);}catch(i1Iii111){console[lliI11li(0x193,'VcY7')](i1Iii111[lliI11li(0x2a9,'^*^#')]);}}async function inviteFissionhelp(lliIIllI){const lill1II=iil1illl,lllI1iI={'ZuzVD':function(I1l11II,IlII11il){return I1l11II(IlII11il);},'gXGGp':lill1II(0x29f,'M&D(')};$[lill1II(0x1f5,'Bf[O')]=lliIIllI,await lllI1iI[lill1II(0x29d,'I6J&')](sendRequest,lllI1iI[lill1II(0x185,'PvId')]),await $[lill1II(0x1cf,'YbK6')](0x7d0);}function lIi11i(_0x4527a6,_0xbbab5d){const _0x50c395=iIli1liI();return lIi11i=function(_0x220ffa,_0x2346c5){_0x220ffa=_0x220ffa-0x180;let _0x1cd400=_0x50c395[_0x220ffa];if(lIi11i['ZACbdF']===undefined){var _0x3b6f9=function(_0x10809e){const _0x1445c9='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x21347b='',_0x3da490='';for(let _0x44a36e=0x0,_0x51557f,_0x4e2021,_0x3ca8d9=0x0;_0x4e2021=_0x10809e['charAt'](_0x3ca8d9++);~_0x4e2021&&(_0x51557f=_0x44a36e%0x4?_0x51557f*0x40+_0x4e2021:_0x4e2021,_0x44a36e++%0x4)?_0x21347b+=String['fromCharCode'](0xff&_0x51557f>>(-0x2*_0x44a36e&0x6)):0x0){_0x4e2021=_0x1445c9['indexOf'](_0x4e2021);}for(let _0x3687c0=0x0,_0xfaff4=_0x21347b['length'];_0x3687c0<_0xfaff4;_0x3687c0++){_0x3da490+='%'+('00'+_0x21347b['charCodeAt'](_0x3687c0)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x3da490);};const _0x3df693=function(_0x2df22c,_0x500b71){let _0x472e44=[],_0x57a911=0x0,_0x4bfdb0,_0x7c561a='';_0x2df22c=_0x3b6f9(_0x2df22c);let _0x43f4b6;for(_0x43f4b6=0x0;_0x43f4b6<0x100;_0x43f4b6++){_0x472e44[_0x43f4b6]=_0x43f4b6;}for(_0x43f4b6=0x0;_0x43f4b6<0x100;_0x43f4b6++){_0x57a911=(_0x57a911+_0x472e44[_0x43f4b6]+_0x500b71['charCodeAt'](_0x43f4b6%_0x500b71['length']))%0x100,_0x4bfdb0=_0x472e44[_0x43f4b6],_0x472e44[_0x43f4b6]=_0x472e44[_0x57a911],_0x472e44[_0x57a911]=_0x4bfdb0;}_0x43f4b6=0x0,_0x57a911=0x0;for(let _0x3579c3=0x0;_0x3579c3<_0x2df22c['length'];_0x3579c3++){_0x43f4b6=(_0x43f4b6+0x1)%0x100,_0x57a911=(_0x57a911+_0x472e44[_0x43f4b6])%0x100,_0x4bfdb0=_0x472e44[_0x43f4b6],_0x472e44[_0x43f4b6]=_0x472e44[_0x57a911],_0x472e44[_0x57a911]=_0x4bfdb0,_0x7c561a+=String['fromCharCode'](_0x2df22c['charCodeAt'](_0x3579c3)^_0x472e44[(_0x472e44[_0x43f4b6]+_0x472e44[_0x57a911])%0x100]);}return _0x7c561a;};lIi11i['RTztLP']=_0x3df693,_0x4527a6=arguments,lIi11i['ZACbdF']=!![];}const _0x5c777b=_0x50c395[0x0],_0xf7d33d=_0x220ffa+_0x5c777b,_0x571b88=_0x4527a6[_0xf7d33d];return!_0x571b88?(lIi11i['ItldTP']===undefined&&(lIi11i['ItldTP']=!![]),_0x1cd400=lIi11i['RTztLP'](_0x1cd400,_0x2346c5),_0x4527a6[_0xf7d33d]=_0x1cd400):_0x1cd400=_0x571b88,_0x1cd400;},lIi11i(_0x4527a6,_0xbbab5d);}async function handleResponse(iiI1li11,Ii1l1I){const lIlilllI=iil1illl,ll1ilIlI={'YeZkS':function(iIllIiil,lI1iIiiI){return iIllIiil+lI1iIiiI;},'cKHDJ':function(Iii1l1i,I111lliI){return Iii1l1i*I111lliI;},'STQov':function(i1lIi1il,Il111iIl){return i1lIi1il-Il111iIl;},'kXmab':lIlilllI(0x198,'dUuh'),'rISyN':function(IiI1l1I,Ii1I1i){return IiI1l1I===Ii1I1i;},'ZvKLy':function(I1i1l1II,IiiiI1l){return I1i1l1II===IiiiI1l;},'BCXlK':function(l1I11ili,l1l11Il){return l1I11ili!==l1l11Il;},'gGhbR':lIlilllI(0x2cc,'I6J&'),'rOCsl':lIlilllI(0x2cd,'ReHA'),'ryTpw':function(I1iilili,il1i1IlI){return I1iilili===il1i1IlI;},'gwgDr':lIlilllI(0x287,'ISwm'),'tcfYu':lIlilllI(0x1f8,'4h3v'),'FihAn':function(liil1lI,l11Il1Ii){return liil1lI===l11Il1Ii;},'wRMyG':function(iliIill,IiillIli){return iliIill===IiillIli;},'tVwTV':lIlilllI(0x27b,'ISwm'),'DqcRO':lIlilllI(0x1ae,'&2pd'),'bIPgP':lIlilllI(0x250,'dUuh'),'RYzcT':lIlilllI(0x277,'Bf[O'),'XXQUN':function(lii11Iii,IlIiI1i){return lii11Iii===IlIiI1i;},'xsSBs':lIlilllI(0x25c,')mgL'),'AxuTs':lIlilllI(0x182,'WbmS'),'vqPDI':function(il1iiIil,IiIiill){return il1iiIil===IiIiill;},'XKjKT':lIlilllI(0x1ca,'iGa2')};try{switch(iiI1li11){case ll1ilIlI[lIlilllI(0x1ef,'kpvL')]:if(ll1ilIlI[lIlilllI(0x223,'PvId')](Ii1l1I[lIlilllI(0x1ec,'Bf[O')],0x0)&&Ii1l1I[lIlilllI(0x187,'4h3v')]){const IIillII1=Ii1l1I?.[lIlilllI(0x1da,'KYVw')];if(ll1ilIlI[lIlilllI(0x2c2,'iN)l')](IIillII1[lIlilllI(0x239,'OxlJ')],0x0)&&IIillII1[lIlilllI(0x1f2,']C2p')])$[lIlilllI(0x295,'DYM%')]=IIillII1[lIlilllI(0x263,'bAVK')][lIlilllI(0x27a,'h&L8')],console[lIlilllI(0x1a6,'I6J&')](lIlilllI(0x283,'kpvL')+$[lIlilllI(0x273,']C2p')]);else{if(IIillII1[lIlilllI(0x29c,'dUuh')])console[lIlilllI(0x1cd,'miBq')](IIillII1[lIlilllI(0x18e,'h&L8')]),$[lIlilllI(0x28d,'OxlJ')][lIlilllI(0x19d,'miBq')](IIillII1[lIlilllI(0x24c,'7LVa')]);else{if(ll1ilIlI[lIlilllI(0x27e,'CwUi')](ll1ilIlI[lIlilllI(0x1b4,'l8Y$')],ll1ilIlI[lIlilllI(0x20c,'x05%')]))console[lIlilllI(0x208,'ISwm')]('❓'+iiI1li11+'\x20'+JSON[lIlilllI(0x1e8,']0zM')](Ii1l1I));else return ll1ilIlI[lIlilllI(0x2a5,'YbK6')](Il1IlI1i[lIlilllI(0x194,'KYVw')](ll1ilIlI[lIlilllI(0x26a,'7LVa')](iIIliI1i[lIlilllI(0x25b,'OxlJ')](),ll1ilIlI[lIlilllI(0x186,'[nJh')](IIiIllI1,l1iIiiII))),lIi11iil);}}}else Ii1l1I[lIlilllI(0x19f,'cx^0')]?ll1ilIlI[lIlilllI(0x2b9,'WU*J')](ll1ilIlI[lIlilllI(0x205,'6UNf')],ll1ilIlI[lIlilllI(0x1d1,'^*^#')])?(console[lIlilllI(0x23f,'KYVw')](Ii1l1I[lIlilllI(0x28d,'OxlJ')]),$[lIlilllI(0x297,'r)ma')][lIlilllI(0x28b,'[nJh')](Ii1l1I[lIlilllI(0x240,'ReHA')])):delete liIIi1ii[lIlilllI(0x270,'^*^#')]:console[lIlilllI(0x22f,'[nJh')]('❓'+iiI1li11+'\x20'+JSON[lIlilllI(0x243,'7LVa')](Ii1l1I));break;case ll1ilIlI[lIlilllI(0x299,'n3gy')]:if(ll1ilIlI[lIlilllI(0x260,'6UNf')](Ii1l1I[lIlilllI(0x2b1,'%zQs')],0x0)&&Ii1l1I[lIlilllI(0x1d7,'iN)l')]){if(ll1ilIlI[lIlilllI(0x2b2,'50f&')](ll1ilIlI[lIlilllI(0x26b,'Aa2s')],ll1ilIlI[lIlilllI(0x183,'yYDg')]))II1IlI11[lIlilllI(0x1f9,'dUuh')](iil1i1l1),liIil11&&(IliI1lII[lIlilllI(0x2a6,'r)ma')]=!![],illlIIIl[lIlilllI(0x251,'kpvL')]&&liiiiIll[lIlilllI(0x251,'kpvL')][lIlilllI(0x206,'H#Un')](iiiIiiil));else{const illlI11i=Ii1l1I?.[lIlilllI(0x18d,'[nJh')];if(ll1ilIlI[lIlilllI(0x222,'pOEJ')](illlI11i[lIlilllI(0x275,'bAVK')],0x0)&&illlI11i[lIlilllI(0x1d9,'pOEJ')])ll1ilIlI[lIlilllI(0x1e3,'Aa2s')](ll1ilIlI[lIlilllI(0x237,'9ULu')],ll1ilIlI[lIlilllI(0x262,'i0wM')])?($[lIlilllI(0x1bc,'ReHA')]+=0x1,console[lIlilllI(0x1a6,'I6J&')](lIlilllI(0x22b,'FabX')+$[lIlilllI(0x184,'PvId')]+']')):ll1Iil11={...ili1II1I,...li1Ill};else illlI11i[lIlilllI(0x1c1,'Aa2s')]?(console[lIlilllI(0x196,'^*^#')]('❌\x20'+illlI11i[lIlilllI(0x2be,'8$Eq')]),$[lIlilllI(0x215,']0zM')][lIlilllI(0x242,'iN)l')](illlI11i[lIlilllI(0x19b,'^*^#')])):ll1ilIlI[lIlilllI(0x272,'[nJh')](ll1ilIlI[lIlilllI(0x1ed,'^*^#')],ll1ilIlI[lIlilllI(0x236,']C2p')])?I1iiill1[lIlilllI(0x218,'H#Un')]('❓'+IIIlI1+'\x20'+i11iI1l1[lIlilllI(0x18a,'bAVK')](Iiii1l1l)):console[lIlilllI(0x264,'9ULu')]('❓'+iiI1li11+'\x20'+JSON[lIlilllI(0x298,'8eA*')](Ii1l1I));}}else Ii1l1I[lIlilllI(0x1f7,'x05%')]?(console[lIlilllI(0x286,'6UNf')]('❌\x20'+Ii1l1I[lIlilllI(0x1d4,'ENgy')]),$[lIlilllI(0x293,'h&L8')][lIlilllI(0x238,'&2pd')](Ii1l1I[lIlilllI(0x1d5,'YbK6')])):ll1ilIlI[lIlilllI(0x253,'8eA*')](ll1ilIlI[lIlilllI(0x1f4,'bAVK')],ll1ilIlI[lIlilllI(0x1c2,'n3gy')])?console[lIlilllI(0x24f,'WbmS')]('❓'+iiI1li11+'\x20'+JSON[lIlilllI(0x20d,'yYDg')](Ii1l1I)):iIllllI1={...I1II11ii,...ll1iiI1I};break;}}catch(lli1il){console[lIlilllI(0x2b3,'&2pd')](lIlilllI(0x230,'OxlJ')+iiI1li11+lIlilllI(0x22e,'I6J&')+(lli1il[lIlilllI(0x1c0,'iN)l')]||lli1il));}}async function sendRequest(I1i1iiIi){const ilII1ll1=iil1illl,ilIlI1i1={'MfShG':ilII1ll1(0x1be,'yYDg'),'hcCoQ':ilII1ll1(0x1a5,']0zM'),'xRjcF':ilII1ll1(0x2bf,'pOEJ'),'RrEOn':ilII1ll1(0x211,'KYVw'),'GrQfA':ilII1ll1(0x1e9,'CwUi'),'JnutH':ilII1ll1(0x27f,'n3gy'),'JcNFh':ilII1ll1(0x1f1,'YbK6'),'jnVFj':ilII1ll1(0x2a2,'%zQs'),'HXDSq':ilII1ll1(0x2b4,']C2p'),'nsLZt':ilII1ll1(0x1bf,'%zQs'),'UAZuN':function(ii1ll1Il,IlI1lIll){return ii1ll1Il!==IlI1lIll;},'wpWvF':ilII1ll1(0x19a,'8$Eq'),'smNAN':ilII1ll1(0x1c5,'iN)l'),'jTSYe':ilII1ll1(0x1ee,'KYVw'),'NOGGc':ilII1ll1(0x25f,'^*^#'),'tzThJ':ilII1ll1(0x269,')mgL'),'hSFRE':ilII1ll1(0x207,'50f&'),'saqUj':ilII1ll1(0x1b5,'4h3v'),'DQvUq':ilII1ll1(0x1fe,'M&D('),'vYmej':ilII1ll1(0x2c6,'8eA*'),'CGdua':ilII1ll1(0x279,'VcY7'),'LIsED':ilII1ll1(0x2aa,'%zQs'),'DrtgE':function(liiIlIII,I11il11I){return liiIlIII===I11il11I;},'bXjTL':ilII1ll1(0x1b9,'ENgy'),'LfQJt':ilII1ll1(0x1db,'PvId'),'eEYVd':function(lIiliIli,lII1lilI){return lIiliIli!==lII1lilI;},'FTMnO':ilII1ll1(0x197,'iGa2'),'XYbmb':function(iIIl1iIi,I1l1lIil){return iIIl1iIi<I1l1lIil;},'lsUCl':ilII1ll1(0x289,'Aa2s'),'rPHAm':function(iiil1II,Il1llIi){return iiil1II>Il1llIi;},'cEAiJ':function(IliIiI1,iIii11){return IliIiI1===iIii11;},'PWkAq':ilII1ll1(0x261,'50f&'),'rNACf':ilII1ll1(0x2af,'KYVw'),'xxako':function(iiI1liIi,lliiIiI1,iliIIlI){return iiI1liIi(lliiIiI1,iliIIlI);},'zMPur':function(IlliII1,lIIlI11i){return IlliII1>=lIIlI11i;},'HbCdx':ilII1ll1(0x226,'[nJh')};if($[ilII1ll1(0x288,'miBq')]||$[ilII1ll1(0x1e6,'DYM%')])return;let ilI1lii='',l1liIlli=null,iii1l11i=null,I1Ill1I=ilIlI1i1[ilII1ll1(0x1cb,'dUuh')],lii1il={},li1I1ili={};switch(I1i1iiIi){case ilIlI1i1[ilII1ll1(0x2a3,'WU*J')]:ilI1lii=ilIlI1i1[ilII1ll1(0x280,'4h3v')],iii1l11i={'appid':ilIlI1i1[ilII1ll1(0x22a,'cx^0')],'functionId':ilIlI1i1[ilII1ll1(0x22c,'ReHA')],'body':JSON[ilII1ll1(0x26c,'DYM%')]({})};break;case ilIlI1i1[ilII1ll1(0x1f0,'8eA*')]:li1I1ili={'appId':ilIlI1i1[ilII1ll1(0x2a7,'@nfn')],'functionId':ilIlI1i1[ilII1ll1(0x1ba,'8$Eq')],'appid':ilIlI1i1[ilII1ll1(0x2bd,'r)ma')],'clientVersion':ilIlI1i1[ilII1ll1(0x268,'cx^0')],'client':ilIlI1i1[ilII1ll1(0x1d3,'%zQs')],'body':{'inviteCode':$[ilII1ll1(0x2a0,'miBq')]||'','areaInfo':'','unpl':''},'version':ilIlI1i1[ilII1ll1(0x2c8,'6UNf')],'ua':$['UA'],'t':!![]},lii1il=await H5st[ilII1ll1(0x1b1,'bAVK')](li1I1ili),ilI1lii=ilIlI1i1[ilII1ll1(0x2ba,'[nJh')],l1liIlli=lii1il[ilII1ll1(0x1a3,'Aa2s')];break;default:console[ilII1ll1(0x23c,'4h3v')](ilII1ll1(0x247,'r)ma')+I1i1iiIi);return;}const iIi1I1l={};l1liIlli&&(ilIlI1i1[ilII1ll1(0x1aa,'I6J&')](ilIlI1i1[ilII1ll1(0x1f6,'7LVa')],ilIlI1i1[ilII1ll1(0x271,'Esoz')])?(lI1ll1lI[ilII1ll1(0x1b3,'iN)l')](l1IilIi[ilII1ll1(0x188,'I6J&')]),IIIIiIil[ilII1ll1(0x235,'l8Y$')][ilII1ll1(0x1fb,'9ULu')](iIliiI1l[ilII1ll1(0x1e2,'DYM%')])):l1liIlli={...l1liIlli,...iIi1I1l});iii1l11i&&(iii1l11i={...iii1l11i,...iIi1I1l});const lIlIIIII={'url':ilI1lii,'method':I1Ill1I,'headers':{'Accept':ilIlI1i1[ilII1ll1(0x213,'dUuh')],'Accept-Encoding':ilIlI1i1[ilII1ll1(0x1a8,'Esoz')],'Accept-Language':ilIlI1i1[ilII1ll1(0x209,'cx^0')],'Connection':ilIlI1i1[ilII1ll1(0x1a1,'x05%')],'Content-Type':ilIlI1i1[ilII1ll1(0x1de,'KYVw')],'Cookie':cookie,'Origin':ilIlI1i1[ilII1ll1(0x290,'cx^0')],'Referer':ilIlI1i1[ilII1ll1(0x294,'FabX')],'Sec-Fetch-Dest':ilIlI1i1[ilII1ll1(0x1eb,'iGa2')],'Sec-Fetch-Mode':ilIlI1i1[ilII1ll1(0x1b6,'x05%')],'Sec-Fetch-Site':ilIlI1i1[ilII1ll1(0x1fd,'n3gy')],'User-Agent':$['UA']},'params':iii1l11i,'data':l1liIlli,'timeout':0x3a98};ilIlI1i1[ilII1ll1(0x255,'miBq')](I1Ill1I,ilIlI1i1[ilII1ll1(0x18b,'ReHA')])&&(delete lIlIIIII[ilII1ll1(0x19e,')mgL')],delete lIlIIIII[ilII1ll1(0x200,'4h3v')][ilIlI1i1[ilII1ll1(0x1c3,'Bf[O')]]);!iii1l11i&&(ilIlI1i1[ilII1ll1(0x1e0,'bAVK')](ilIlI1i1[ilII1ll1(0x2ae,'n3gy')],ilIlI1i1[ilII1ll1(0x18f,'@nfn')])?(IiI1[ilII1ll1(0x29b,'yYDg')]=!![],liiiiIli[ilII1ll1(0x21d,'&2pd')]&&lIIlli1I[ilII1ll1(0x229,'WU*J')][ilII1ll1(0x21c,'i0wM')](Illiilli)):delete lIlIIIII[ilII1ll1(0x1e5,'%zQs')]);const lliil1I=0x1;let IiiliI1l=0x0,IIIilIll=null,iii1Ii1=![];while(ilIlI1i1[ilII1ll1(0x2a1,'ENgy')](IiiliI1l,lliil1I)){if(ilIlI1i1[ilII1ll1(0x224,'iGa2')](ilIlI1i1[ilII1ll1(0x181,'i0wM')],ilIlI1i1[ilII1ll1(0x2a4,']0zM')])){ilIlI1i1[ilII1ll1(0x228,'[nJh')](IiiliI1l,0x0)&&await $[ilII1ll1(0x27d,'@nfn')](0x3e8);const liIiiIll=await common[ilII1ll1(0x2b7,'FabX')](lIlIIIII);if(!liIiiIll[ilII1ll1(0x23e,'YbK6')]){if(ilIlI1i1[ilII1ll1(0x199,'cx^0')](ilIlI1i1[ilII1ll1(0x28e,'4h3v')],ilIlI1i1[ilII1ll1(0x1fc,'miBq')]))iiliIili[ilII1ll1(0x244,'pOEJ')][ilII1ll1(0x225,'h&L8')](IllI11Il);else{IIIilIll=ilII1ll1(0x20f,'50f&')+I1i1iiIi+ilII1ll1(0x28c,'h&L8')+liIiiIll[ilII1ll1(0x233,'x05%')],IiiliI1l++;continue;}}if(!liIiiIll?.[ilII1ll1(0x221,'kpvL')]){IIIilIll=ilII1ll1(0x2c1,'Aa2s')+I1i1iiIi+ilII1ll1(0x254,'ReHA'),IiiliI1l++;continue;}ilIlI1i1[ilII1ll1(0x1f3,'ENgy')](handleResponse,I1i1iiIi,liIiiIll[ilII1ll1(0x190,'n3gy')]),iii1Ii1=![];break;}else i1liilll[ilII1ll1(0x214,'pOEJ')]+=0x1,III11ii1[ilII1ll1(0x24b,'Bf[O')](ilII1ll1(0x248,'Aa2s')+i1Illlli[ilII1ll1(0x1b7,'bAVK')]+']');}ilIlI1i1[ilII1ll1(0x24d,'H#Un')](IiiliI1l,lliil1I)&&(console[ilII1ll1(0x29e,'Aa2s')](IIIilIll),iii1Ii1&&($[ilII1ll1(0x21e,'PvId')]=!![],$[ilII1ll1(0x29a,'yYDg')]&&(ilIlI1i1[ilII1ll1(0x1bb,'8eA*')](ilIlI1i1[ilII1ll1(0x1ab,'WU*J')],ilIlI1i1[ilII1ll1(0x2c9,'VcY7')])?$[ilII1ll1(0x297,'r)ma')][ilII1ll1(0x22d,'VcY7')](IIIilIll):(iI111il[ilII1ll1(0x2ac,'r)ma')](liiIi1i[ilII1ll1(0x2c5,'H#Un')],ilIlI1i1[ilII1ll1(0x25e,'h&L8')]),iiII1il[ilII1ll1(0x1bd,'n3gy')](0x1)))));}function iIli1liI(){const iIIliIIi=(function(){return[...[iｉl,'BRjXRTsTSjhiDWQaymEHiD.rcAoCmU.FHDvdC7Fg==','WRXucw7dNe3cMSokpCkDW7i','x3Hlhmob','E8koW5ZcGhTc','W5GEvcJcP1RcMCoU','W43cVhbLWOu','WQ4DmSoxWRW','Amo9fSkgWPXWoJldMNddUZzQW44mWOm+dt/cUSkaWQnfWPhdSexcQWCUtCk8CKRcOb3cQ8o5bNi9WR8PW4ZdGSkHfg8SzNhcUKq7W7W5vWvwCq','smouWQu','WP3cPSk4WQuTsCoslCkjW65w','W4fmvCoW','W71JBSoufG','nwy0W4tcLa','W4P0AW0','mmkMWRNcMCko','jq3cHXZdVweK','W5Tit8o3eSoTca','jCkxtHXrWOq','kSk2WQJdOa','kmk3tCoFW7aBmJVdKL/cKHe','WPhdJ8k+W6eLWOO','WRKCh8oj','WPeNmWldISooemkQhrVdNvm','WRrubgpdNapcK8oteCklW73cHa','WPqJrgC','WRuUlCo6iG','n38L','W5RdJ8kYW5y0','W4f7hJjJW6OFWQtdHCk6W4eo','imkVWPSwWQ3cUWW','WPtdLgKVWPC','ohLoW6CJW50','cmkFWO/cQ8kssW','iSk/WPWJWQdcVq4','WRCInaxdQW','tsBdV3xcLmoBW78auq','W5hcGv7dM8o3W7bYW5tdGG','W6qdvt/cKq','W5hcVhTYWRG','WQhcHYlcJW','kMiaW4lcLq','WROhaSoys8oqwf3dGLldMSkFo17cUcXH','ymkIW67cKxa','mSoHW4OJqa','W5qCcSkYqW','yConec7cQaK','mbdcLqtdSW','W6FdGCkbW4Se','WQVcHJdcG8kqW4tdOa','W4TEWQG8W7q','W4BcQmostxldQhO','W6ZdGmk3nCoIW6pcOd8fW48xWPW','WQOrfG','WRycomkPW7O','lhfy','vSo1WOpdLGq','W4eKqH/cRq','rYhcHwWhW6hcQSoCWPSJW6VcU8k3iHRcObiDt13dVMldHmozW59cpfRdVCktgNbHWRFdJmoBW5TkWRH7W7dcVmoaWRJdTSkOjWVdOKRdGcfsr2aoWOH7owxdMLJdUhZdGCopWRdcP8khW7hdMrNcReDP','i8oXW49T','W7tdHmkKjCo+W47cSG','W5ZcVrTPW7ylyUw+UEwLK+odJ+s5QEs6IUI0RUwoTq','WRq7W7SHWQe5WOTydSkCWRuqmIK','hSk/ts9l','W4LEWPSRW4z6W5/dV1WJWPz5pG','W543WQ5dW70','F8oTaG','p8o4W7JdTmkrCCoBoxDraeBdHSkbWO7dKSoeW71Cgt3cISorW5DmvaXjWOtcOCkvsNO','WP8BmW','mSoPWQOCAG','j2Th','dSkTW5qIW64','W5NcGSoItx8','BCoOWPX/pxrWWRqN','W6FcPx8xWQ9MjCoR','8kI4O8kO','WR/dUuCQWQHec8owW7ZcUG','WRujh8oyfmokeXFdHu7dKSogjLZdTwb5tSo1ygxcOIa','j8oGW7vAWQO','WRutp8o5WQm','WOldMCk+W706WOPNWOdcHCk0W4C','uZFdVM/cM8oBW7m','CSowWQHIaq','6lws5yYb5PwD5Pw5','DCoRhq','WQBcTSk9bKa','WP8roSkyW7Do','W6iAWR4','eSkFW4u','WPVcSmkApwy3Aa','WR09ktddG8obaW','ACo/W7JdOCkBySoR','gCkYW5muW4tcPG','B8kBW7FcKq','WQxdG8kLW5uN','WQabdG/dOq','W6pcL2jWWPC','WR3dGwy','iCotW5DEWQq','uSkLWPv9iLtdMG','jSoaW65yWOe','WRePdI7cPvas','o8ouWRW9sa','4P+wFUwiPUwlUEAlNUwlICoaAG','W5xdHComWPldHa','imkrwa','W5ZORklMSONLKihLU4OD','omo/W4e','4P65W5RMNjpOGzlMR7NNOPxLP57NKAXF','jh/dTW','m8oTW7VdQ8kzDCoF','W47cV8otuwe','FmoGW6JcSsjbWO50WRlcIq'],...(function(){return[...['jhVdTmoqW5JcSfK','uSoqfG/cTW','kffWW6qC','WPdcVmkr','WPFcK0pdRmo1WP/cVW','WQFdR1SrWQ8','uJ3dQG','W7ddJSkI','WOSCW497WOORW53dGMqFWPjc','W4vyx8oNfSo5hG','WResda','W4ddSSovWOldO18J','omk1WPtdTYm','kmk+WQq','W49AWO0JW5X4W7xdTKS','WO7dJ8k+W6COWPLN','W4tdOSoDFLqXz1FdNSo/','WR3dGxaNWPuhra','4P+OnEACRoEEJEITN+AWTxm','4P+tWRFLIPJLI5JMI4ZLIR5OW6i','WRFdH3KdWOSz','rSouWQ3dUqDjW5O','WQ7cHYe','W55hWOuhW4f4','y8ojkSkFWRO','WPlcTmkMWQK','b8kOW5O','WOiqe8oCWO8','zSkFW7dcG3nlWOK','WOmvjSklW7P5WO/dHc/cQSkoW6O','dSo+W68tqq','WO3ORAdMS6tLP4dOTQCy4P+AW5ZML5BLKORLUiVMLi3MJRW','ymojWRBdSIC','oNb2W7SJ','d8oKW73dI8kY','WOtdJ8k5W5KSWO1XWOxcRmkK','g8oGW5eJBrdcPa','wSo1W7mfW5NcHCk2yW','WOFcM1FdI8o1WPy','WQyUwhm7','WRuIgtJcVa','WPBdJK0UWR4','khL+W4pcQgSLv25mDCkCW5rcW4ZcGSoFWRJcIJVdVLLxWQjGWR/cULhcKbRdP8oYWPtcKSo4W7RcKaSPWP4KorDsbKy8','W78PWQfgW6e','m8oVW7hdOCkw','jSkVW4DsWPW','W43dR8kyW7u8WPS','jNDh','iSkBvg7dVe8ygCkOWRBcTmoK','W6aiqINcIfZcKq','W4pcHfJdMSo2W6vUW5pcK8kX','fSoiWRSDyW','WPSPt3j7WRKBWOBdNCky','W59LWRCoW7G','WQldGuyxWOO','pSk+WPOmWQlcUWdcUmkT','W6KUW5RcJSoPWPxcLG','WPuImLJcNuu7WPNcPmknW4ZdIW','WOSQW4/cHCoeWOtcQSoG','iNaHW6hcIZq','WQKPW73cGCom','dmoiW7DmWQi','ESogftlcSbGygCk0WQS','W5aUWR9UW7VdNepcGWq5','W53dO8krW4m/WOSm','W6VcNNxdTSoG','WOBcPIZcI8kH','jxhdOa','jCkxuGK','WRldHMGVWO0oFSkDW5SH','WOSgjmkSW6C','EdJcMSo1WQO','Bw9opG','W6dcSNtdNSos','W70mqY7cKgtcLCo4f8k2W6lcGa','W47dK8kadSo1','W63dH8kmlSod','WRxdGx0TWRCkumkx','6i685yYS5yIQ5yMR56ct77Y2','W4tdUCocWPtdUG','E8oKWODI','W5uVWQ4','WPSUp8kYW6K','vSooWQZdKaXm','WOZdNNioWQ8','m8kpW5DNWRO','mSo5W54','W7VORz/MSzZLPBFOT5Xl4P6HW5i','WPJcN0RdNmo7WPZcVW','W4ZdTSkUamoQ','WRq7W6e3WO8','d8ohWPWoyW','WRtcMCkhlwi','WPxcU8kVWQKM','WRBdJw01WPGmwa','WPCpW7K3WR8','jmkKWP4mWRJcUsRcSCkWWRO','pxLjW7C','W4LWDrVdIra2','c8o7W40+zHNcUCo4aa','W7KovWpcNa','C8o5WP1LmNr8','CCoPWPPqp3j+','WQqxc8o1WP7cIa','WQBcOmkXWPOA','WRRdUfy','xZtcG2GnWOtdPmkaWPG4W7FcQW','tCovWRtdVbznW4y','edhcLGldVG','sComW5pdUCorcq','WQqEfZ7cGG','uIhdMf/cLG','W69izSoVia'],...(function(){return['W4TGCI7dHby0','ug1Pdmoq','iCkLWO8','p3qGW7pcHYa6','c8kFWPdcR8osvZHjW7L6oW','WO46fGtcSW','W4LMyq','xmo1WO1GWPldTSkAy8kMW7FcGCoC','W4S5FdtcPG','WOCtj8osea','iqBcGGBdQgmcE2dcLW','g8krWPNcRW','kCoAW4xdOCk/','WPRcUSko','ESohea','WPdcVmkfoMiI','ox1uW4aJW58UrqC','WQe7W74xWQSLWPq','fSoMW5W8rH/cVCo7','WQ41ks3cSW','bSoIW6nwWOi','W4FcGSonCfK','j31tW7aTW5CG','W6nNvW7dQq','W6WCWQpcSLP6','WPpdI8k/W6aWWQfRWORcVCkOW57cRq','WRFcHJxcJ8kqW6ldVCkyDmkoWQq','8yQ4Vbe','fmkHWPFdJqG','WPldJmkeW7Sr','gSouW4fOWQq','D8oLf8kp','hCoIW48JCq','Bmk6WRZcQCojiCkmbLLUkY/dTa','W5CZWOvDW7S','dSkAyX5a','WPOAcZxdTW','W64JAYRcJa','WPFcH8kGWOOV','W6VdGmoVWPVdRG','WPldTmkubYBcT3GEWPi6xSkC','gmkfW6HYWQq','dCkwW6OIW4e','wSoTWO1eha','WRm7lH/dNmouaCoJbXFdGa','WRuqgJhdNW','b8oeW7D2WPO','W7JdGmkXia','WPhcSmk4WR8/wSos','lx1uW48JW5CSqJfLngRdTmo8','W4ZdVSkzW6K+WOGaWR7cOq','W4/dJ8omWQxdJG','vmooWRhdVq','mmoXW5j4','WRNdGwqlWOOm','xfPQjmo3','W6KmrtS','WR0RW4/cLSo+WOa','iCkdW6ibW6VcKmkpAmkVW7BcRSoFWQLYitNcUxj6uq','kSkxrW','WRSrbmohfq','lCkTW5yVAYn2WPaTWPrguG','pN40','W7lcO3TcWRm','WRyFa8omWPtcSmoJW7RcPYypna','h8oJWQWYqW','W4GIWPpcRgm','mhGPW43cLsa','AYhdQg7cTmoDW7Sd','qSosWRO','WPqTxMm','eCodWP4OAmkehG','oMRdTCokW5FcSfvIW7q','W5/cT8o1vLK','W4jnBmolWRzqWOJdQWdcGCkz','WQBdTKmIWRfsdmoyW6ZcVG','jSk8WOWvWQO','BH3dNKG','WPdcUSkS','WR7cS8kShNu','WRqnW7NcRSoV','W7hdMx7dK8oCWPhdVCk1BmkSWQ5A','WQNcLmkrWRKq','WPqUpJNcVa','W6b6AuFcNSktuSomdJldQhddGW','g34kW4tcNW','WPVcRCkrlgO','WP7cN0ddNa','keCeW6VcOG','W5JdR8kFW4HLWPWD','r8oAWRBdTGO','iSk4WRS','lLNdR8obW6S','W7tdLCkXmCoOWOBdRMmgW5qlWOZdSCkBW5tdUmkUW7xcS8oddCkJiW','W6JcISofs3i','W57dUCkyW6KJWPSmWRZcLSoqkG','CmomWOvEnq','dY3cOa','W4qBWQZcI2e','pmo9W4SWtq','W4ZdPmovWPJdSuWJWPH4mSoY','W6Gvwc4','44co5O2m56Eu44ch6k6K5ywB6i6U5yYehCkWrLOrWPi','tmoqW4K','i8kYWQ/dSHbhWOe','WRtdVKSoWQ9g','W5uMwXhcVq','WO7cJHFcOmkq','44cd5O2456wz44gk6kYZ5ys16i+S5y6GWPpcOCkdW6DNwG','l8kNWQZdRrHdWOvgWPZcHtxcT8o+W6ilW4zHxtWIW45FWPddHCk7WOLpWOb+WPTQWQ/dVW'];}())];}())];}());iIli1liI=function(){return iIIliIIi;};return iIli1liI();};function random(i1111II1,iliiIli1){const iIiIiii1=iil1illl,IiI1Ili1={'zVWkD':function(IllI111,li1iIlIl){return IllI111+li1iIlIl;},'spSCF':function(IIiIiIli,lIi11Ii){return IIiIiIli*lIi11Ii;},'KNRPe':function(lliIiI1i,II11Iiii){return lliIiI1i-II11Iiii;}};return IiI1Ili1[iIiIiii1(0x1b0,'^*^#')](Math[iIiIiii1(0x194,'KYVw')](IiI1Ili1[iIiIiii1(0x212,'[nJh')](Math[iIiIiii1(0x1e4,'9ULu')](),IiI1Ili1[iIiIiii1(0x1d0,'YbK6')](iliiIli1,i1111II1))),i1111II1);}var version_ = 'jsjiami.com.v7';

// prettier-ignore
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `🔔${this.name}, 结束! 🕛 ${s} 秒`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }
