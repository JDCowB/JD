/*
活动名称：京东看春晚助力
https://pro.m.jd.com/mall/active/4TeSpXMCG6Kwy63rTeRDUp6wfL4n/index.html
环境变量：JD_PARTY_INVITE_CODE // 指定助力码

自行控制助力上限

cron:1 1 1 1 *

*/

const $ = new Env('京东看春晚助力')
const jdCookie = require('./jdCookie')
const notify = require('./function/sendJDNotify')
const common = require('./function/jdCommon')
const { H5st } = require('./function/jdCrypto')

var iｉl='jsjiami.com.v7';const liIIIlil=I1iI111i;(function(IliIi1iI,liilI11I,iillIili,IlI1illi,IiIl1ii,iIIl1l11,I1ii11i){return IliIi1iI=IliIi1iI>>0x9,iIIl1l11='hs',I1ii11i='hs',function(ilI1il1i,l1il1IlI,lIiIl1I,il1Ii11,IlIiI1){const li1ii=I1iI111i;il1Ii11='tfi',iIIl1l11=il1Ii11+iIIl1l11,IlIiI1='up',I1ii11i+=IlIiI1,iIIl1l11=lIiIl1I(iIIl1l11),I1ii11i=lIiIl1I(I1ii11i),lIiIl1I=0x0;const llIlIiiI=ilI1il1i();while(!![]&&--IlI1illi+l1il1IlI){try{il1Ii11=parseInt(li1ii(0x125,'L[Bd'))/0x1+-parseInt(li1ii(0x1ac,'0rO5'))/0x2+-parseInt(li1ii(0x134,'Z0h['))/0x3+-parseInt(li1ii(0x18d,'0rO5'))/0x4+parseInt(li1ii(0x17c,'UG&z'))/0x5+parseInt(li1ii(0x12d,'L[Bd'))/0x6*(parseInt(li1ii(0x176,'fjUH'))/0x7)+-parseInt(li1ii(0xec,'DN]O'))/0x8*(-parseInt(li1ii(0xae,'Xk1f'))/0x9);}catch(iliil11){il1Ii11=lIiIl1I;}finally{IlIiI1=llIlIiiI[iIIl1l11]();if(IliIi1iI<=IlI1illi)lIiIl1I?IiIl1ii?il1Ii11=IlIiI1:IiIl1ii=IlIiI1:lIiIl1I=IlIiI1;else{if(lIiIl1I==IiIl1ii['replace'](/[pHeSLJknTxQgVDyRdEIur=]/g,'')){if(il1Ii11===l1il1IlI){llIlIiiI['un'+iIIl1l11](IlIiI1);break;}llIlIiiI[I1ii11i](IlIiI1);}}}}}(iillIili,liilI11I,function(IIlI1Il,iI1Ii1Ii,iiI1iiiI,IIlI1IIi,I1i1liiI,i1IIiI1I,lIliIIi){return iI1Ii1Ii='\x73\x70\x6c\x69\x74',IIlI1Il=arguments[0x0],IIlI1Il=IIlI1Il[iI1Ii1Ii](''),iiI1iiiI=`\x72\x65\x76\x65\x72\x73\x65`,IIlI1Il=IIlI1Il[iiI1iiiI]('\x76'),IIlI1IIi=`\x6a\x6f\x69\x6e`,(0x156b10,IIlI1Il[IIlI1IIi](''));});}(0x19a00,0x7ea2c,i1111I,0xcf),i1111I)&&(iｉl=0x360b);const isNotify=![];$[liIIIlil(0x13f,'iRfO')]=process[liIIIlil(0x130,'*icB')][liIIIlil(0xa3,'Wlk#')]||'';let ALL_CHAR=liIIIlil(0xfc,'Ftpx'),ALL_DIGIT=liIIIlil(0xb3,'SXfu'),ALL_ALPHABET=liIIIlil(0x100,']ZX2'),sdkToken=liIIIlil(0x71,'F*)c')+randomString(0x6f,ALL_DIGIT+ALL_CHAR)[liIIIlil(0x96,'i9gx')](),jsToken=liIIIlil(0x189,'Wlk#')+randomString(0x7b,ALL_DIGIT+ALL_CHAR)[liIIIlil(0x1a2,'I5^Q')](),cookie='';const cookiesArr=Object[liIIIlil(0x75,'v!l&')](jdCookie)[liIIIlil(0xe4,'TO!L')](i1liiI11=>jdCookie[i1liiI11])[liIIIlil(0x85,'D$9S')](iI1l1IlI=>iI1l1IlI);!cookiesArr[0x0]&&($[liIIIlil(0x81,'F*)c')]($[liIIIlil(0x108,'^wFA')],liIIIlil(0x161,'*icB')),process[liIIIlil(0x105,'zyi*')](0x1));function i1111I(){const i1ll1l1i=(function(){return[...[iｉl,'ERVJjeHspgkjixapmniLD.cgdoTmI.uIv7SrDQyT==','WONdJ8kIDCodWP8/rGBdOZNcVmk1DmkHBMnzWQdcNq','CSkBxCkQnG','W5SMiCoQzCoPD8ojlshcTmoj','WOHaWQnIu1zQomkcWR4','u1VcLCkK','W7aUimoLdCkSW5a','wuzHWOzJe8k9xmkpt8oYdCkXW5FdJf0QwSk1dCohE8obeCkSW7hcJSkXW51ti8o6zgtdOwmkDX/dIetcVtFcOmoUsxejoYO7m8kiW77cLKpcJWVdTNq1W5atW7qhlSkEiJ/dKLddSWPmuq','WR7cKSoW','WP8zwfrk','WORdTgLO','W7lcKb7dMmo5','WRDystNdJNOkW6xdMCk5W5C','ASkIpxLo','W63cK8k+ta','WQtcKXviaW','W49UWQHEWPacDCknWQFdLtpdRmou','W7NdI8o3WPJcKmoOkCoNW7JcGa','W7fCWORcSW','W7FcQSotWPpcMMFdSW','W6GIa0HrWR0','WPFcVSoq','mCoDWPdcHs0','WQddUhi','wJn2qda','amktvLu','WP3dOHTVW6O','WPtcHmk4FgPWW7q','CXTaW4rR','W6iqfSo7xq','lSofW5vYW4W','W68laCoVFG','WRDNwapcMG','W6BORABMSyJLKjZLUOhcTW','CoITQoAYM+wNPEI1R8of4P2hlEAxOowsRow4IoAxMoAmKq','W6O2hKq','WQRdVM0','F3PJWQvk','WR5FW5W5WPrL','wfXXWPnO','WRTtW4GHWQy','W6tcL8k5xHtcQdG','W5vWW4yCWQW','vv/cU8kCya','qSkAj1rNW7hdUW','eCoVW4O3dmoNeG','rCkupue','WOWLwMPw','DbHXDX4','Ftv2CdC','teFcKgnq','WOdcI8k/W47dQa','W48Wcf5WWRhdKCkT','WQ/dPmkA','v8k6B8krp8omlXy','baddJwdcVmk/','kedcQmo6WOhdGHK5WP/dIGmL','W7KKpCoZ','w8oIoSomqq','WRxcNCojW5i6','W5/cOJm6','W5CbcqhdNMXZALLn','umkKp1LB','uWDlW7nuiq','W4GYn8oOCG','xhNcSCkQWPG','W7FcRSoq','8kgzRtK','WOS5rwLnh0/dKWviW5KHoCkGW6FcHSkDWQZdH8oQW4qRxLxdKdeNqSoNWRxcGWtcNa','W6xcNCkT','kJuEi1O','W6OIh1HhWO/dLCkMWR3dMcddHW','W4G4nSoKiSkQW5JcGa','ECkopSogDq','mcBdQmo1W5tdTCo9C1a','eCkBrW','WQ5lErtcGL3dHKlcN8kSnNtdMJeKde81v8kemCoEsG','sSkNFSkth8okkXu3','naa3mNjsWPe','4P+rA+ADUEEDS+IUM+AYICkv','W6xcNCkTAaFcVq','gCkqExv1','tXRdM8kUW4i','WPrLsaxcMa','EEIUKUAWHUwLSoI0THxINAGC','qqLRCXhcJSoBi14','WOpcVdVdNL0','W6hcU8kYqX8','EW1JWQNdJcVcGGhcRh0','W4JcTZuYBCkesSkksG','W6WhWPrhW5m3zmksWRNdRCkBW6CqAMDHtaH5W6XrWOtdHmkeW4KCy8khv8kmW5NdRCkGWRLiW4H6WPBcN8otlNylFSkxWOFdNhy2WPVcL8khW4RcMWa3WO3dKW07iNe','WOtcUCoBW68atmoDW5bUcgq','tCkmamoxx20vWQGn','gSkVy8oOW4qW','kbiHm2DmWOfvnL49W7ZdVb17qComxmo5dCofW4DkWRRdGWq','maSYkgDqWRDtpuS','rvLCWPjy','W6zJfmo8WQK','eqddILBcV8kKfs0afIm7D8oP','W44/oSoQ','B8kQaCopEG','W7lcKaZdLmo1WQDoDSk7W5u','W45JeCo0','W7JcLHVdJ8oaWRy','WPddQG5gWPlcSrRcLd/cQa','W7/cPCkHrY0','gCkCx8ovW6a','WPfpWQDQsKbTnSksWRO','W6G7n8o3gmkUW7BcIINdRmoCsmo4','W5xdT3/cVqJdRdtdGhfp','WQxcQX5p','WO8KrxfD','WQ3cM8kXW4O','WQVdThNcONtdSmkY'],...(function(){return[...['W4vvWOdcPa8','WRtdSgtcTxRdUG','W5JcRcm+','W5RcOsq/zSkfe8oDasPBobBdQmomWOO','WQRdTgtcTMhdVW','WRldMSkYzSoA','WRddV8kptmoSWQOcEsa','qHHRBGBcTSoLobHri8ox','WO/dRxm','W6Wfhq','W50EmCoTsa','W4lcPCkXEqKPBSkRWORcLuvkrCkPW4VdJ1K','WPVcImkXqNHW','WQhdOSkhzSoTWQKo','WQTpW6tcPJK','sSkMB8kzfmoEmq','fmoiW74','W4ZdMCo7oJmVW6pdHYHgCg8','6lws5y6f5Ps15PEv','WPnrWRr3sW','W7eoiSo6aq','WQDsW6tcGqNcSa','WRz0WOe','WOVdRHLcW4BcJXFcJJRcPhqo','W5SrdHRdKhLv','W4/cQ8kUtgLpW7u','WP5xW64yWOi','WPW4FMD2','uLtcLW','z8kTW6RdOxVcGSkIv1yRW64','W58AcWddHxTc','W5BcPJqOySkerG','W4pdP8kAWR9hpmo5W55Jn0JdRa','gSocW4nJW7a','WRldTvpcP2u','W7CMhL9FWRFdMq','WQPAyWpcHq8','a8oTW5mYWRS','l0FcOSo6WOtdHsCCWPBdPG0X','C3dcS8oy','AMZcUgyqdW','W6dcNmk8rahcQH4IWRNcHG','lSkQBhfC','W58AcWddHxTZALLn','zhVcRNqfdwa','xfDMWOvXtSo3','u8kqoLvUW6S','W4OzpSoElW','gCofW7PEW4pdHmkxbCo0BCovsupcU8oMkq','WRpcUqrsjmk9W5T0bSokW5C','W6pcPcm+sG','gGRdMq','Cmk+gmoRFW','WP1tWQnSta','sfFcQCoOW7m','W7BcMWNdJSoGWQvO','uvpcMq','WOKHvhDLca','W4S9dLxcSW','DH/dVq','fXpcOCo+WQK','W7WEoSoAiG','gSoMW5yRhW','eSoRW5qH','6iYx5y+u5yUv5yIk56oj77Y+','WOLPW4FcVbW','DhdcQmoyW4ddG8o3q1ldSqve','z3ZcRmk/WOS','A8klf8omF2SrWQS','W4hdH0FcNZ4','W5pcItxdS8od','WQ1pW6RcVaNdRCoWWRC1W7RdLmo6dSkvbsmKWPnnjILVpq','BahdKCkTW6a','W7FcKr0','hatdTCoKW6PCza','WRXEv0pcMZqA5BYf5AE244c45lMa5lIV6lwg5yY6','8y2jKCoL','44cN5O+Q56EB44ou6k+b5ywW6i+l5y6EobJdJd88WRC','W5NcOmooWPtcNM7dOJXQDeldSq','W40UpCo/CmoAzW','WRL0WPtcSW','W7KwpJpdIa','WQ1lWQxcHmo9','WPRdR8kLDCoW','WQZdHCkfsSoP','gSkPDSojW5i2lW','WR/cRWrinSkUW5S','hSkCsuHnfCkL','qJJcSmoEWQmRW4m','WOFdUK7cH2y','WQpcKJjQmq','BYldMmknW4y','nCo9WRZcOIi','W5eob8oCfG','W6HuWOJcIGa','nmkDuvvChSkJicrIr0u','W78IkCoBh8kS','WQldNSkuACom','aXNdP8o7W7zcg8o2WOyPW5RdMG','W5OogYtdIq','xKlcHCk2EG','kSoVWP7cKYu','gCk2ACojW540icKZWOBdH8o8fmkAxfyqd0lcPXhcVSoSm2SSrmohpWtcJCoFmq','iqhcSmoVWO8sW4RcJa','rCogcHqnrSoNwqPICLnk','rSkrWPT2W5PCW4yjWOhcQmowW6K','WO/cTSkGzvm','s3/cV2iinweqofxdPCknBSouwgzuWObNWQNdVSo7fJRdTCkvW7CquLi','WRDgyqJcPt7cOGVcN8kjAf/dSrfNot44D8ohA8oFCSkKW4GuW6aXW4z2kmo5W7rylxq5rSkXW5XdCSklvcdcN8obtCklWO5zxGOyWOZcTsbRca','hrZcSCo4WRK','W5OBgG','WQ7cHCkOv3W','WPSrDhfG','W6FcM8kPrJVcRJaO','W7ZcMW7dSCoUWQvKD8kmW4qLW59voa'],...(function(){return['WRDoW7dcIrtcSW','W7GQf29rWRtdMq','WQNdR8kzfCkX','WQVcK8k/W6BdL8k6','WQhcMmo7W54','W4qeoSoxva','WQT7wbqnW6dcImkkWPpdPsddIh4','WO/dThucBSkksmkVqG','mrWYk1K','CKlcQuHTW6ldLa','tr1c','W41Nd8oIWQLdW7W','W6DoWPdcRIVdUghdG8kjW6xdMW','W6ePa8o5za','h8ogW4W','AxtcQCoFW5JdU8oZ','W6DNWPpcHGG','W7y9ewBcPW','WQHEW63cVXVcSmk6','uSkbo0LSW7JdPHjt','WQP6sqJcPa','WRRcJSk3W4ldISk6DSk2WRK','WORcGmkMAIz4W6pdTZv5Bq','W5GZiCo3CSorD8obiG','gSoJW4e','dSoVW4OXaCo0','4PYFuowiS+wjLoAkOUwjRNid','W4/cRbiRC8kguCkVuMOk','iK4NW63cGxFdUa','WRDTWR5PDG','bCkyA3fD','zxhcUG','W7b0WRtcHb4','W5/dT3JcGWZdUci','WPFdOaW','oJFdN3NcUW','xHz+','WQTYwbKiW6NcJSkgWQtdHqtdIhK','W6PsWOq','W7ChofZdGLFdNs/cT8kklxRdMG','W418WOmdW6RdRqWeWPpcIq','pmk6BNf+','grFcPSoUWQauW4i','vszb','gb3cSG','W4JcUmk8xL8','bmkxs2jwh8k8zbu','W6mFmLVcLW','WQbuWRTjwq','WOrasfZcHsGauuDrWQLaiW','W5RcSdqYCmkxrSkiFwWc','W5K5ma7dVa','W5OreW7dHxy','WRVcPbnElW','uSkxfq','z0BcT2nN','WQ7dNfpcTfC','WR4DtuLf','4P6pWQVMN5FOG5JMR6hNOQpLPA/NKjL5','W6OPkCoBwW','W7alcg3cKM4','eHVcRq','WPXjWOlcHCo1','WQ1EW7/cQb/cPCkS','w1zXW4yH','WRrpW5aEWQ0','qbXOBXRcMSoW','W67cL8k+zudcVcK','W6lcL8kZxG','pSktsCoDW50','WRxdPxJcUhVdSmk+n2e','pXtdHhdcNa','WPHCWQVcH8ot','rv/cKSkWwKW','WOXTWOhcQSo9','WQ3cUCkCyvS','vCkdq8kppW','W4VcK8kcqra','wKhcUa','WRhcPrnE','xefY','Bx/cRmofW43dUCovx0xdVq','W5lcRteYD8kgymkdv3W','W7zjWRZcTZhdOG','WQbwyrdcLbu','fYFdT0tcTW','W6LZWPVcQdm','W53cQmkOz0O','WQHyrJlcVq','dmoRW4SWfmoFhSkrWRFdGxhdSW','W4S6oxtcLq','W6Tsp8oPWQi','W4RcQSkSt0LOBq','WRRcRXzFmSk7W40','nSo2WQe','WOLuW6OwWRi','6lEJ5y+m5Pw+5PAe','tgVcRCkcWQW','WOpcICoMteu7W6VdTMLHpJSDWRFcOZ/dUMFdLfTIW7bJySkBWQ81W4ZcQIhcVvZcQ8omuSkTWRFdPvJcJLaUWQhcQd3cH8kU','W6OTaCo2wa','CflcRN1GW6tdLG','W7rCW7S5WQJcUe92W5/dI8ky','W6KUbCoiwa','W7dcICoXWQtcLG','W7NcOmooWOBcKMC','W4COna','WQr+W4qnWOG','tNpcOmoFW7y','WP/cImkZ','xKDHWRb8smo1','qZfMWRhdSW','WRyCW5OgW5q','W4NcMSkCzxa','WQdcLmkZW4ldKmk4xmk/WQtdNa'];}())];}())];}());i1111I=function(){return i1ll1l1i;};return i1111I();};!(async()=>{const iiiI1I1l=liIIIlil,lIl1iIil={'AjRhD':iiiI1I1l(0x180,'D$9S'),'ixdsL':function(lI111Ili,I1III11I){return lI111Ili<I1III11I;},'sULoS':function(llllIlIi,lI1l11lI){return llllIlIi+lI1l11lI;},'xHbyo':function(IllIilll,lI111iIi){return IllIilll(lI111iIi);},'oCiIH':iiiI1I1l(0x84,'IqJ&'),'mgdWz':function(i1liI1){return i1liI1();},'xwpno':function(Ilill1Ii,Iii111){return Ilill1Ii+Iii111;}};$[iiiI1I1l(0x1b9,'I5^Q')]=0x0,$[iiiI1I1l(0xdf,'iRfO')]=lIl1iIil[iiiI1I1l(0x94,'zyi*')],notify[iiiI1I1l(0x99,'TO!L')]({'title':$[iiiI1I1l(0x153,'*1LX')]});for(let Iiii1iII=0x0;lIl1iIil[iiiI1I1l(0x178,'*icB')](Iiii1iII,cookiesArr[iiiI1I1l(0x138,'D$9S')]);Iiii1iII++){$[iiiI1I1l(0xad,'c#&w')]=lIl1iIil[iiiI1I1l(0x159,'T1ay')](Iiii1iII,0x1),cookie=cookiesArr[Iiii1iII],common[iiiI1I1l(0x1b5,'UG&z')](cookie),$[iiiI1I1l(0xd6,'0rO5')]=lIl1iIil[iiiI1I1l(0x9b,'Ftpx')](decodeURIComponent,common[iiiI1I1l(0x104,'1o2D')](cookie,lIl1iIil[iiiI1I1l(0x18c,'zyi*')])),$['UA']=common[iiiI1I1l(0xca,'Ftpx')]($[iiiI1I1l(0x158,'&s(y')]),$[iiiI1I1l(0x12c,'iRfO')]=notify[iiiI1I1l(0x13c,'mkSJ')]($[iiiI1I1l(0x1bc,'NutH')],$[iiiI1I1l(0x17b,'BIjU')]),$[iiiI1I1l(0x185,'v!l&')]='',console[iiiI1I1l(0x12a,'QpZb')](iiiI1I1l(0x15f,'iRfO')+$[iiiI1I1l(0xc9,'F*)c')]+'】'+($[iiiI1I1l(0xd8,'YyFI')]||$[iiiI1I1l(0xea,'nDYu')])+iiiI1I1l(0x15e,'fjUH')),await lIl1iIil[iiiI1I1l(0x1b4,'z%&4')](Main),common[iiiI1I1l(0xfd,'Z0h[')]();if($[iiiI1I1l(0x187,'OS[S')])break;await $[iiiI1I1l(0xb4,'IqJ&')](0x3e8);}isNotify&&notify[iiiI1I1l(0x10f,'T1ay')]()&&(notify[iiiI1I1l(0x10e,'nDYu')](lIl1iIil[iiiI1I1l(0x88,'z%&4')](notify[iiiI1I1l(0xce,']DUA')],'\x0a')),await notify[iiiI1I1l(0xc5,'0rO5')]());})()[liIIIlil(0x150,'BIjU')](I1ilil1i=>$[liIIIlil(0xf2,'v!l&')](I1ilil1i))[liIIIlil(0x163,'zyi*')](()=>$[liIIIlil(0xdb,'nDYu')]());async function Main(){const i1iiIll=liIIIlil,I1IIli={'aUiLN':function(il11l1I,iii11lii){return il11l1I===iii11lii;},'WdcXw':i1iiIll(0x169,'1@Db'),'hMYeB':function(iIiIliii,Iii1lll){return iIiIliii!==Iii1lll;},'KPCxj':i1iiIll(0x1ba,'iRfO'),'BGMGG':function(iIII1lii,IIIIl11I){return iIII1lii(IIIIl11I);},'AnzEG':i1iiIll(0xa5,'zyi*'),'XujJg':function(Ili1Il1I,l1111l1){return Ili1Il1I(l1111l1);}},iIIiIli1=await common[i1iiIll(0x186,'c#&w')](cookie);if(!iIIiIli1&&I1IIli[i1iiIll(0x151,'nDYu')](typeof iIIiIli1,I1IIli[i1iiIll(0x183,'L[Bd')])){console[i1iiIll(0x1b3,'BIjU')](i1iiIll(0x91,'OS[S'));return;}try{I1IIli[i1iiIll(0x1bf,'xyiH')](I1IIli[i1iiIll(0x8c,'^wFA')],I1IIli[i1iiIll(0x8b,'Xk1f')])?(llillIII[i1iiIll(0x9e,'F*)c')]=!![],lilIliI[i1iiIll(0x1b1,'BIjU')]&&IlIili1i[i1iiIll(0x95,'S[cf')][i1iiIll(0xb7,'Z0h[')](liiilIIl)):I1IIli[i1iiIll(0x175,'Wlk#')]($[i1iiIll(0x181,'BIjU')],0x1)?!$[i1iiIll(0x83,'I5^Q')]&&(await I1IIli[i1iiIll(0x79,'QpZb')](sendRequest,I1IIli[i1iiIll(0x1c2,'zyi*')]),await $[i1iiIll(0xbb,'UG&z')](0x7d0)):await I1IIli[i1iiIll(0x1b7,'Hi[q')](inviteFissionhelp,$[i1iiIll(0xa2,'SXfu')]);}catch(Il11IiI1){console[i1iiIll(0xd7,'Wlk#')](Il11IiI1[i1iiIll(0xa8,'nDYu')]);}}function I1iI111i(_0x45a142,_0x1b08b3){const _0x2d38a1=i1111I();return I1iI111i=function(_0xdcd083,_0x3e5052){_0xdcd083=_0xdcd083-0x70;let _0x3f8195=_0x2d38a1[_0xdcd083];if(I1iI111i['Uslpdb']===undefined){var _0x5d54c7=function(_0x437999){const _0x237fde='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x2d275e='',_0x3f3953='';for(let _0x1430d9=0x0,_0x3f80fb,_0x57469b,_0x261f5f=0x0;_0x57469b=_0x437999['charAt'](_0x261f5f++);~_0x57469b&&(_0x3f80fb=_0x1430d9%0x4?_0x3f80fb*0x40+_0x57469b:_0x57469b,_0x1430d9++%0x4)?_0x2d275e+=String['fromCharCode'](0xff&_0x3f80fb>>(-0x2*_0x1430d9&0x6)):0x0){_0x57469b=_0x237fde['indexOf'](_0x57469b);}for(let _0x6f0965=0x0,_0x37c6f8=_0x2d275e['length'];_0x6f0965<_0x37c6f8;_0x6f0965++){_0x3f3953+='%'+('00'+_0x2d275e['charCodeAt'](_0x6f0965)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x3f3953);};const _0x4730e5=function(_0x35a8bf,_0x5761ce){let _0x210162=[],_0xa25ad1=0x0,_0x6a000a,_0x381fd5='';_0x35a8bf=_0x5d54c7(_0x35a8bf);let _0x15411c;for(_0x15411c=0x0;_0x15411c<0x100;_0x15411c++){_0x210162[_0x15411c]=_0x15411c;}for(_0x15411c=0x0;_0x15411c<0x100;_0x15411c++){_0xa25ad1=(_0xa25ad1+_0x210162[_0x15411c]+_0x5761ce['charCodeAt'](_0x15411c%_0x5761ce['length']))%0x100,_0x6a000a=_0x210162[_0x15411c],_0x210162[_0x15411c]=_0x210162[_0xa25ad1],_0x210162[_0xa25ad1]=_0x6a000a;}_0x15411c=0x0,_0xa25ad1=0x0;for(let _0x1b3926=0x0;_0x1b3926<_0x35a8bf['length'];_0x1b3926++){_0x15411c=(_0x15411c+0x1)%0x100,_0xa25ad1=(_0xa25ad1+_0x210162[_0x15411c])%0x100,_0x6a000a=_0x210162[_0x15411c],_0x210162[_0x15411c]=_0x210162[_0xa25ad1],_0x210162[_0xa25ad1]=_0x6a000a,_0x381fd5+=String['fromCharCode'](_0x35a8bf['charCodeAt'](_0x1b3926)^_0x210162[(_0x210162[_0x15411c]+_0x210162[_0xa25ad1])%0x100]);}return _0x381fd5;};I1iI111i['yZmkvk']=_0x4730e5,_0x45a142=arguments,I1iI111i['Uslpdb']=!![];}const _0x4c057f=_0x2d38a1[0x0],_0x1bb591=_0xdcd083+_0x4c057f,_0x506aeb=_0x45a142[_0x1bb591];return!_0x506aeb?(I1iI111i['VXkady']===undefined&&(I1iI111i['VXkady']=!![]),_0x3f8195=I1iI111i['yZmkvk'](_0x3f8195,_0x3e5052),_0x45a142[_0x1bb591]=_0x3f8195):_0x3f8195=_0x506aeb,_0x3f8195;},I1iI111i(_0x45a142,_0x1b08b3);}async function inviteFissionhelp(liii1li){const lI1iI1i=liIIIlil,iiI={'HCGmr':function(IllII1l1,lIl11I1){return IllII1l1(lIl11I1);},'FRdEa':lI1iI1i(0x11b,'ZE39')};$[lI1iI1i(0x132,'iRfO')]=liii1li,await iiI[lI1iI1i(0xa0,'bzR[')](sendRequest,iiI[lI1iI1i(0x1c5,'QpZb')]),await $[lI1iI1i(0x13b,'DN]O')](0x7d0);}async function handleResponse(iIIi1llI,Ii1IIli1){const lii1111l=liIIIlil,iIlI1l1i={'aZFpW':function(II1iiill,li11IIli){return II1iiill||li11IIli;},'rjTPd':lii1111l(0x144,'4%qu'),'WRmHC':function(l1illil,llIi1iIi){return l1illil<llIi1iIi;},'JnPgx':function(llI1I,il1Illl1){return llI1I*il1Illl1;},'RierQ':lii1111l(0x173,'UG&z'),'Vvgji':lii1111l(0xe9,'0rO5'),'oNxok':function(ill11lli,Ii1i1I1i){return ill11lli===Ii1i1I1i;},'vWkjX':function(I1l1lI1I,ll1iiIIl){return I1l1lI1I===ll1iiIIl;},'hyvjJ':lii1111l(0xc1,'zyi*'),'KWtYL':lii1111l(0x98,'TO!L'),'hIxnj':function(lllIlIii,I1ii1I1i){return lllIlIii===I1ii1I1i;},'OLojH':lii1111l(0xd4,'S[cf'),'UChUt':lii1111l(0x156,'DN]O'),'qXAtD':function(I11III1i,iili1l){return I11III1i===iili1l;},'lzfMx':function(l1IiI1I,ilIII11){return l1IiI1I!==ilIII11;},'IqzeL':lii1111l(0x127,'Hi[q'),'BiVVD':function(ii11ilIi,iIlIiiII){return ii11ilIi===iIlIiiII;},'lEDlU':lii1111l(0xc7,'F*)c'),'qXUgk':function(illIl11l,lil111il){return illIl11l!==lil111il;},'IWEeA':lii1111l(0x146,'I5^Q'),'zqjmf':lii1111l(0xf3,'UG&z')};try{switch(iIIi1llI){case iIlI1l1i[lii1111l(0x7b,'QpZb')]:if(iIlI1l1i[lii1111l(0x168,'Wlk#')](Ii1IIli1[lii1111l(0x80,'NutH')],0x0)&&Ii1IIli1[lii1111l(0xd0,']DUA')]){if(iIlI1l1i[lii1111l(0x10b,'v!l&')](iIlI1l1i[lii1111l(0x18f,']ZX2')],iIlI1l1i[lii1111l(0x72,'Ftpx')])){const lli1Ii1i=Ii1IIli1?.[lii1111l(0xa7,'*icB')];if(iIlI1l1i[lii1111l(0x17e,'L[Bd')](lli1Ii1i[lii1111l(0x121,'Wlk#')],0x0)&&lli1Ii1i[lii1111l(0xd9,'1o2D')])$[lii1111l(0x82,'DN]O')]=lli1Ii1i[lii1111l(0x1a0,'*1LX')][lii1111l(0x107,'c#&w')],console[lii1111l(0x124,'4%qu')](lii1111l(0x154,'^wFA')+$[lii1111l(0x13d,'v!l&')]);else lli1Ii1i[lii1111l(0x18a,'SXfu')]?iIlI1l1i[lii1111l(0x198,'Xk1f')](iIlI1l1i[lii1111l(0x14e,'Xk1f')],iIlI1l1i[lii1111l(0xaf,']DUA')])?(console[lii1111l(0x12a,'QpZb')](lli1Ii1i[lii1111l(0x129,'OS[S')]),$[lii1111l(0x199,'OS[S')][lii1111l(0x8f,'C2q&')](lli1Ii1i[lii1111l(0x174,'nDYu')])):(Illl1I[lii1111l(0xd7,'Wlk#')]('❌\x20'+iIII1iiI[lii1111l(0x196,'DN]O')]),i1Iiil[lii1111l(0x1a8,'T1ay')][lii1111l(0xb9,'xyiH')](lIi1IlIl[lii1111l(0x140,'mkSJ')])):console[lii1111l(0x1ad,'IqJ&')]('❓'+iIIi1llI+'\x20'+JSON[lii1111l(0xef,'YyFI')](Ii1IIli1));}else{lliIIiIi=iIlI1l1i[lii1111l(0x10c,'1@Db')](llIilll1,0x20);let iIiIiI=iIlI1l1i[lii1111l(0x1a5,'UG&z')],i111IiIi=iIiIiI[lii1111l(0x118,'xyiH')],iIIIllil='';for(iIi11l1=0x0;iIlI1l1i[lii1111l(0x143,'nDYu')](Il1I111I,l1i1l11);lI1i1IIi++)iIIIllil+=iIiIiI[lii1111l(0x109,'c#&w')](IlliilI[lii1111l(0xd1,'waR3')](iIlI1l1i[lii1111l(0x194,'zyi*')](liI11l1l[lii1111l(0xb6,'0rO5')](),i111IiIi)));return iIIIllil;}}else Ii1IIli1[lii1111l(0x199,'OS[S')]?(console[lii1111l(0x195,'UFvr')](Ii1IIli1[lii1111l(0xa8,'nDYu')]),$[lii1111l(0xa8,'nDYu')][lii1111l(0xed,'UG&z')](Ii1IIli1[lii1111l(0x14b,'c#&w')])):iIlI1l1i[lii1111l(0xf9,'v!l&')](iIlI1l1i[lii1111l(0xd3,'ZE39')],iIlI1l1i[lii1111l(0x1a4,'Hi[q')])?console[lii1111l(0x1a6,'mkSJ')]('❓'+iIIi1llI+'\x20'+JSON[lii1111l(0x77,'xyiH')](Ii1IIli1)):(i1I111ll[lii1111l(0x101,']ZX2')]=l1iI1I1i[lii1111l(0x142,']DUA')][lii1111l(0x10d,'Hi[q')],l1ilIIli[lii1111l(0x1bd,'&s(y')](lii1111l(0x154,'^wFA')+il1l1Ii1[lii1111l(0xfa,'(m]b')]));break;case iIlI1l1i[lii1111l(0xcc,'i9gx')]:if(iIlI1l1i[lii1111l(0x87,'IqJ&')](Ii1IIli1[lii1111l(0x116,'I5^Q')],0x0)&&Ii1IIli1[lii1111l(0xb0,'v!l&')]){const iIl1li1I=Ii1IIli1?.[lii1111l(0xde,'I5^Q')];if(iIlI1l1i[lii1111l(0x184,'waR3')](iIl1li1I[lii1111l(0x188,'0rO5')],0x0)&&iIl1li1I[lii1111l(0x7a,'*icB')])$[lii1111l(0x145,'NutH')]+=0x1,console[lii1111l(0x9a,'zyi*')](lii1111l(0x1a1,'E!l)')+$[lii1111l(0x193,'IqJ&')]+']');else iIl1li1I[lii1111l(0xc8,'Ftpx')]?(console[lii1111l(0x1b3,'BIjU')]('❌\x20'+iIl1li1I[lii1111l(0xff,'1@Db')]),$[lii1111l(0xcb,'v!l&')][lii1111l(0x9d,'L[Bd')](iIl1li1I[lii1111l(0x120,'L[Bd')])):iIlI1l1i[lii1111l(0x177,'iRfO')](iIlI1l1i[lii1111l(0x78,'1o2D')],iIlI1l1i[lii1111l(0xd5,'SXfu')])?I1il1lil[lii1111l(0x182,'iRfO')]('❓'+lIiiiI1i+'\x20'+IIi1Illi[lii1111l(0x19e,'zyi*')](l1I1iIIi)):console[lii1111l(0x7f,'fjUH')]('❓'+iIIi1llI+'\x20'+JSON[lii1111l(0x77,'xyiH')](Ii1IIli1));}else Ii1IIli1[lii1111l(0x113,'xyiH')]?iIlI1l1i[lii1111l(0x97,'zyi*')](iIlI1l1i[lii1111l(0xa1,'z%&4')],iIlI1l1i[lii1111l(0x19b,'D$9S')])?(console[lii1111l(0x15d,'c#&w')]('❌\x20'+Ii1IIli1[lii1111l(0xb5,'TO!L')]),$[lii1111l(0x133,'I5^Q')][lii1111l(0x19f,'*1LX')](Ii1IIli1[lii1111l(0x16a,'NutH')])):ilIliii={...II11iI11,...ilIiIll}:iIlI1l1i[lii1111l(0xc2,'D$9S')](iIlI1l1i[lii1111l(0xbf,'zyi*')],iIlI1l1i[lii1111l(0x1be,'S[cf')])?console[lii1111l(0x14f,'E!l)')]('❓'+iIIi1llI+'\x20'+JSON[lii1111l(0xfe,'&s(y')](Ii1IIli1)):(delete i1I111[lii1111l(0xde,'I5^Q')],delete IIIilll[lii1111l(0x70,'OS[S')][iIlI1l1i[lii1111l(0xbe,'ab@w')]]);break;}}catch(iiill11){console[lii1111l(0x182,'iRfO')](lii1111l(0x1c1,'Wlk#')+iIIi1llI+lii1111l(0xc3,'xyiH')+(iiill11[lii1111l(0x192,'^wFA')]||iiill11));}}async function sendRequest(liliilli){const lll1i1I1=liIIIlil,I111lIIl={'aZpAP':lll1i1I1(0x18b,'Z0h['),'wPCDi':lll1i1I1(0x8a,'*1LX'),'vqKbR':lll1i1I1(0x15b,'OS[S'),'BaHle':lll1i1I1(0xf7,'ZE39'),'vYbsT':lll1i1I1(0x12b,'2wd^'),'UbLbU':lll1i1I1(0xdc,'YyFI'),'ChccW':lll1i1I1(0xf8,'T1ay'),'HwONB':lll1i1I1(0xaa,'SXfu'),'qQvyY':lll1i1I1(0x1af,'i9gx'),'qXEQf':lll1i1I1(0x17f,'mkSJ'),'nikMX':lll1i1I1(0x11c,'I5^Q'),'ngKVL':lll1i1I1(0x1a3,'(m]b'),'hJoZO':lll1i1I1(0xac,'I5^Q'),'sPZbI':function(iIliili,Iil1iIll){return iIliili!==Iil1iIll;},'jWndX':lll1i1I1(0xbc,'2wd^'),'TXWnP':lll1i1I1(0x14a,'DN]O'),'DJaXN':function(iII1l1II,Ill1l1II){return iII1l1II!==Ill1l1II;},'Fahma':lll1i1I1(0x102,'F*)c'),'NFjUN':lll1i1I1(0x17a,'1@Db'),'ObCZy':lll1i1I1(0x11f,'z%&4'),'lEqlm':lll1i1I1(0x93,'L[Bd'),'RZEai':lll1i1I1(0x10a,'2wd^'),'TTxLa':lll1i1I1(0xe6,'waR3'),'uPmQn':lll1i1I1(0xee,'D$9S'),'uRBBt':lll1i1I1(0xa9,'F*)c'),'YXSPe':lll1i1I1(0x111,'waR3'),'qQOCX':lll1i1I1(0x164,'QpZb'),'LRYpf':lll1i1I1(0x19d,'L[Bd'),'QRsqK':function(I11IlIll,iiil1l1I){return I11IlIll===iiil1l1I;},'LRalk':lll1i1I1(0x1b2,'(m]b'),'tdYvp':lll1i1I1(0x162,'TO!L'),'zErLl':function(IilIiiI,i1IiliIl){return IilIiiI!==i1IiliIl;},'KHQPG':lll1i1I1(0xe2,'zyi*'),'lPOuN':function(Il111II1,i11lllIl){return Il111II1<i11lllIl;},'LETJz':function(iIi1Iill,iIlIIII1){return iIi1Iill>iIlIIII1;},'ntzjC':function(I11IiI1l,lII1llli,iiil111){return I11IiI1l(lII1llli,iiil111);},'ebevh':function(I1lIiiil,iiiIiI1I){return I1lIiiil>=iiiIiI1I;},'aBIQg':lll1i1I1(0x76,'1@Db'),'vIWCF':function(ii11li1,ll1lIiil){return ii11li1!==ll1lIiil;},'beZYV':lll1i1I1(0x179,'C2q&'),'GvLxD':lll1i1I1(0x1b6,'Xk1f'),'AkDVs':lll1i1I1(0x139,'UFvr')};if($[lll1i1I1(0xe1,'ab@w')]||$[lll1i1I1(0x190,'S[cf')])return;let Iiiil1='',li1iIi1=null,llIl1II=null,iI1Illll=I111lIIl[lll1i1I1(0x197,'IqJ&')],ll1I1li1={},liIill1I={};switch(liliilli){case I111lIIl[lll1i1I1(0x166,'QpZb')]:Iiiil1=I111lIIl[lll1i1I1(0x15c,'E!l)')],llIl1II={'appid':I111lIIl[lll1i1I1(0x12e,'Ftpx')],'functionId':I111lIIl[lll1i1I1(0x166,'QpZb')],'body':JSON[lll1i1I1(0xfb,'I5^Q')]({})};break;case I111lIIl[lll1i1I1(0xb1,'NutH')]:liIill1I={'appId':I111lIIl[lll1i1I1(0x90,'Ftpx')],'functionId':I111lIIl[lll1i1I1(0x11e,'zyi*')],'appid':I111lIIl[lll1i1I1(0x7e,'v!l&')],'clientVersion':I111lIIl[lll1i1I1(0x114,'IqJ&')],'client':I111lIIl[lll1i1I1(0x15a,'c#&w')],'body':{'inviteCode':$[lll1i1I1(0x16b,'UG&z')]||'','deviceInfo':JSON[lll1i1I1(0x19c,'SXfu')]({'sdkToken':sdkToken,'jsToken':jsToken}),'areaInfo':'','unpl':'','qdPageId':I111lIIl[lll1i1I1(0xe0,']DUA')],'mdClickId':I111lIIl[lll1i1I1(0x16e,'NutH')]},'version':I111lIIl[lll1i1I1(0x172,'IqJ&')],'ua':$['UA'],'t':!![]},ll1I1li1=await H5st[lll1i1I1(0x74,'v!l&')](liIill1I),Iiiil1=I111lIIl[lll1i1I1(0x12f,'waR3')],li1iIi1=ll1I1li1[lll1i1I1(0xa6,'Hi[q')];break;default:console[lll1i1I1(0xc6,'xyiH')](lll1i1I1(0xf1,'nDYu')+liliilli);return;}const ll1iI1iI={'d_model':I111lIIl[lll1i1I1(0x89,'D$9S')],'osVersion':I111lIIl[lll1i1I1(0xba,'ZE39')],'uuid':''};li1iIi1&&(I111lIIl[lll1i1I1(0xe8,']ZX2')](I111lIIl[lll1i1I1(0xe3,'fjUH')],I111lIIl[lll1i1I1(0x7c,'L[Bd')])?li1iIi1={...li1iIi1,...ll1iI1iI}:lI1iII1I[lll1i1I1(0x1ab,'ZE39')]('❓'+IiI111i1+'\x20'+IIl1Ii11[lll1i1I1(0x19a,']DUA')](IIi1liii)));llIl1II&&(I111lIIl[lll1i1I1(0xdd,'Z0h[')](I111lIIl[lll1i1I1(0x103,'^wFA')],I111lIIl[lll1i1I1(0xd2,'ZE39')])?llI1liI1[lll1i1I1(0x147,'1o2D')](illI11il[lll1i1I1(0xf0,']ZX2')]):llIl1II={...llIl1II,...ll1iI1iI});const lillii1i={'url':Iiiil1,'method':iI1Illll,'headers':{'Accept':I111lIIl[lll1i1I1(0x148,'&s(y')],'Accept-Encoding':I111lIIl[lll1i1I1(0x165,'iRfO')],'Accept-Language':I111lIIl[lll1i1I1(0x128,'nDYu')],'Connection':I111lIIl[lll1i1I1(0xf5,'D$9S')],'Content-Type':I111lIIl[lll1i1I1(0x1c0,'waR3')],'Cookie':cookie,'Origin':I111lIIl[lll1i1I1(0xab,'waR3')],'Referer':I111lIIl[lll1i1I1(0x16f,'E!l)')],'Sec-Fetch-Dest':I111lIIl[lll1i1I1(0x13e,'UG&z')],'Sec-Fetch-Mode':I111lIIl[lll1i1I1(0x119,'Wlk#')],'Sec-Fetch-Site':I111lIIl[lll1i1I1(0x155,'OS[S')],'User-Agent':$['UA']},'params':llIl1II,'data':li1iIi1,'timeout':0x3a98};I111lIIl[lll1i1I1(0x157,'fjUH')](iI1Illll,I111lIIl[lll1i1I1(0x1aa,'1o2D')])&&(delete lillii1i[lll1i1I1(0xde,'I5^Q')],delete lillii1i[lll1i1I1(0x8e,'NutH')][I111lIIl[lll1i1I1(0x136,'xyiH')]]);!llIl1II&&(I111lIIl[lll1i1I1(0x92,'fjUH')](I111lIIl[lll1i1I1(0xa4,'YyFI')],I111lIIl[lll1i1I1(0x1b0,'UG&z')])?(IIII1iIl[lll1i1I1(0x11d,'Xk1f')](lIllIilI[lll1i1I1(0xcf,'*1LX')]),II11li[lll1i1I1(0xbd,'L[Bd')][lll1i1I1(0x14c,'*icB')](l1l1lllI[lll1i1I1(0x141,'F*)c')])):delete lillii1i[lll1i1I1(0x1c3,'Xk1f')]);const l11i11i1=0x1;let iIiIIIl1=0x0,i1iiiliI=null,l1IIIli1=![];while(I111lIIl[lll1i1I1(0x7d,'YyFI')](iIiIIIl1,l11i11i1)){I111lIIl[lll1i1I1(0x171,'nDYu')](iIiIIIl1,0x0)&&await $[lll1i1I1(0x110,'NutH')](0x3e8);const llI1lIl1=await common[lll1i1I1(0x73,'ZE39')](lillii1i);if(!llI1lIl1[lll1i1I1(0x123,'YyFI')]){i1iiiliI=lll1i1I1(0x160,'SXfu')+liliilli+lll1i1I1(0xf6,']ZX2')+llI1lIl1[lll1i1I1(0x149,'Hi[q')],iIiIIIl1++;continue;}if(!llI1lIl1?.[lll1i1I1(0x112,'SXfu')]){i1iiiliI=lll1i1I1(0xe5,'1@Db')+liliilli+lll1i1I1(0xc4,'C2q&'),iIiIIIl1++;continue;}I111lIIl[lll1i1I1(0x122,'OS[S')](handleResponse,liliilli,llI1lIl1[lll1i1I1(0x112,'SXfu')]),l1IIIli1=![];break;}if(I111lIIl[lll1i1I1(0x170,'C2q&')](iIiIIIl1,l11i11i1)){if(I111lIIl[lll1i1I1(0x9f,'(m]b')](I111lIIl[lll1i1I1(0x86,'1o2D')],I111lIIl[lll1i1I1(0xb8,'C2q&')])){console[lll1i1I1(0x191,'ab@w')](i1iiiliI);if(l1IIIli1){if(I111lIIl[lll1i1I1(0x1a7,'IqJ&')](I111lIIl[lll1i1I1(0xcd,'*icB')],I111lIIl[lll1i1I1(0x135,'4%qu')]))lIIIi1l1[lll1i1I1(0x1a9,'2wd^')]('❓'+IliI1ll+'\x20'+ilIlIiII[lll1i1I1(0x11a,'Wlk#')](Il1llliI));else{$[lll1i1I1(0x8d,'z%&4')]=!![];if($[lll1i1I1(0x137,'0rO5')]){if(I111lIIl[lll1i1I1(0x106,'&s(y')](I111lIIl[lll1i1I1(0xeb,'&s(y')],I111lIIl[lll1i1I1(0x16d,'xyiH')])){ii11iiII[lll1i1I1(0xe7,'v!l&')](lll1i1I1(0x126,'BIjU'));return;}else $[lll1i1I1(0x192,'^wFA')][lll1i1I1(0x1c4,'BIjU')](i1iiiliI);}}}}else ii1i11l={...iIi1liIl,...I1lI11iI};}}function randomString(llIii1II){const Il1iiIi1=liIIIlil,ll1IIlIi={'JbzsO':function(ilI1iI1i,liIllIlI){return ilI1iI1i||liIllIlI;},'UjAap':Il1iiIi1(0x117,'I5^Q'),'YdXPr':function(iIii1i1,lIilI1ii){return iIii1i1<lIilI1ii;},'VbLHj':function(iiIilIl1,lii1iIII){return iiIilIl1*lii1iIII;}};llIii1II=ll1IIlIi[Il1iiIi1(0x9c,'DN]O')](llIii1II,0x20);let I1I1l1=ll1IIlIi[Il1iiIi1(0xf4,'E!l)')],il1lii=I1I1l1[Il1iiIi1(0x1bb,'iRfO')],lllIIlli='';for(i=0x0;ll1IIlIi[Il1iiIi1(0x167,'Wlk#')](i,llIii1II);i++)lllIIlli+=I1I1l1[Il1iiIi1(0x14d,'waR3')](Math[Il1iiIi1(0x152,'*1LX')](ll1IIlIi[Il1iiIi1(0xc0,'4%qu')](Math[Il1iiIi1(0x115,'xyiH')](),il1lii)));return lllIIlli;}var version_ = 'jsjiami.com.v7';

// prettier-ignore
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `🔔${this.name}, 结束! 🕛 ${s} 秒`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }
